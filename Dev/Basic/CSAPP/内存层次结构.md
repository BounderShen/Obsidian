### 存储技术和趋势

##### 随机访问

##### 关键特点

1. RAM传统上被封装位芯片
2. 基础的存储单元是cell，一位一个Cell
3. 多个RAM芯片形成内存

##### RAM的两种类型

1. SRAM：静态
2. DRAM：动态

#### 非易失性内存

##### 非易失性保持

1. 闪存：具有部分块级擦除能力，10w次后会出现磨损

#### 传统总结连接CPU和内存结构

1. 总线被多个设备共享
2. 总线是携带地址，数据，控制信号的平行线的集合

##### 内存读传输

1. CPU放地址在内存的总线上
2. 主存从内存线上读取某某地址，并检索它再放置到总线上
3. CPU从总线读取并复制到寄存器上

##### 内存写操作

1. CPU放置地址在总线上，主存读取并等待相应的数据到达
2. CPU放置数据在总线上
3. 内存从总线读取数据并存储到相应地址

#### 磁盘几何

1. 由唱片并有两个面
2. 每个面形成的同心圆叫做磁道
3. 每个磁道由被缺口分割的扇区组成

##### 磁盘容量

1. 1GB = 10的9次方Bytes
2. 记录密度：可以压缩到1英寸磁道段中的密度
3. 磁道密度：可挤入1英寸径向段的磁道数
4. 面密度：记录密度*磁道密度

#### 记录区域

#### 访问时间

##### 平均访问时间

1. 寻道+轮询+传输

##### 寻道

1. 3-9ms

##### 轮询

1. `Tavg   rotation    =    1/2    x    1/RPMs    x    60    sec/1    min`    
2. `Typical    Tavg    rota;on    =    7200    RPMs`    

##### 传输时间

1. `Tavg    transfer= 1/RPMx1/(avg#sectors/track)x60secs/1min`

##### 重点的点

1. 在扇区的第一个位是最昂贵的，其余都是免费的
2. SRAM：4ns。DRAM：60ns

#### 读磁盘扇区

1. CPU通过向与磁盘控制器相关联的端口（地址）写入命令、逻辑块号和目标内存地址来启动磁盘读取操作。
2. 磁盘控制器读取扇区并执行直接内存访问（DMA）传输到主存储器。
3. 当DMA传输完成时，磁盘控制器通过中断（即在CPU上断开特殊的“中断”引脚）通知CPU。

#### 固态磁盘

1. 页面：512kb-4kb，块：32  - 128页面
2. 块要写入需要当前页所在的块的所有页面复制到新的块才能写入
3. 重复写入10w次会出现磨损
4. 数据以页为单位进行读写

##### 随机写入速度慢的原因

1. 擦除块需要1ms
2. 修改一个块的页面需要将该块所有的页面复制到新的块

#### SSD和磁盘的权衡

##### 优势

1. 无移动部件，更快，更省电，更坚固

##### 劣势

1. 潜在的磨损
   1. 磨损平衡逻辑在闪存翻译层

### 引用局部性

#### 局部性

##### 局部原则

1. 程序倾向于使用数据和指令地址相近或者相等，对于它们最近使用的

##### 时间性

1. 最近重新引用

##### 空间性

1. 使用相近的地址

### 缓存在内存层次结构中

#### 缓存类型

##### 冷未命中

1. 因为缓存是空的

##### 未命中冲突

1. 多个数据映射在同一层上
2. 大多数缓存将第k+1级的块限制在一小部分（有时是单个）第k级块位置的子集上

##### 容量未命中

1. 活跃的缓存集大于缓存时

#### 传统DRAM组织

1. 矩阵结构

##### 读

1. 选取对应的行
2. 将行复制到缓冲区
3. 列访问脉冲选择对应的列
4. supercell将缓冲区的数据复制到数据线上，然后返回到CPU

#### 加强DRAMS

##### DRAMS核心具有更好的接口逻辑和更快的IO

1. 同步DRAM
   1. 使用传统时钟而不是异步控制
   2. 允许重用行地址
2. 双倍数据率同步DRAM
   1. 双边缘时钟在每个引脚的每个周期发送两位
   2. 通过小预取缓冲区大小区分不同类型





