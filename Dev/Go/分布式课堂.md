### 主-备份

#### 问题

1. 采用分布式化一个数据的副本有多少个
2. Raft算法
3. Paxos算法
4. 是否值得花三倍的价钱买

#### 方法

##### 复制机器状态

复制了内存中所有的内容以及机器寄存器中的所有内容

1. 大多数复制都是针对应用程序层面的
2. 论文复制的是机器层面的东西，并不在意此上面是什
3. 么软件系统，它会去复制操作系统低级层面内存和机器寄存器中的东西

##### 转移状态

1. 机器的内存和备份只是存储最新状态
2. 让primary发送一个完整的状态给副本，如果primary发生故障了，那么Backup就能从它所拥有的最近的状态开始执行

##### 使用虚拟机技术来执行该复制方案

1. 前提：一样的物理机器，一样的虚拟机、操作系统以及同样的配置
2. 两台物理机器各开启一个虚拟机并运行主副服务器

##### 两个机器通信

1. 客户端发送请求给primary，此时会发生中断
2. 虚拟机看到这个数据包，会复制一份发给primary，其中⼀件事就是，它会去模拟⼀个⽹络数据包的到达中断给primary（主）上的 guest operating system（客体操作系统），以此将这个数据包发送给primary上的这个应⽤程序的 副本
3. 虚拟机监视器（VMM）知道这个输⼊是要传给⼀个replicated虚拟机的，

